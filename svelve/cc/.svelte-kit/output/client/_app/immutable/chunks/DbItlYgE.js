var Z=Object.defineProperty;var L=e=>{throw TypeError(e)};var Q=(e,s,t)=>s in e?Z(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var B=(e,s,t)=>Q(e,typeof s!="symbol"?s+"":s,t),U=(e,s,t)=>s.has(e)||L("Cannot "+t);var r=(e,s,t)=>(U(e,s,"read from private field"),t?t.call(e):s.get(e)),v=(e,s,t)=>s.has(e)?L("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,t),Y=(e,s,t,a)=>(U(e,s,"write to private field"),a?a.call(e,t):s.set(e,t),t);import{c as q,a1 as V,a6 as O,a2 as X,a as x,T as F,h as D,i as ee,af as se,U as te,b as ae,J as re,ag as ie,M as ne,O as fe,P as ue,f as ce,s as C,o as de,r as he,u as G,q as le,ah as j,A as $,W as oe,z as I,ai as _e,aj as H,ak as ve,al as be,am as Se,an as ge,ao as Pe,ap as Ae,ab as Ee,aq as Te,ar as pe,K as ye,as as Ie,at as Re,au as me,av as Oe,G as De,aw as Me}from"./jznUQfAd.js";import{s as we,g as Ne}from"./CEH0wINy.js";var l,o,h,b,E,T,R;class ke{constructor(s,t=!0){B(this,"anchor");v(this,l,new Map);v(this,o,new Map);v(this,h,new Map);v(this,b,new Set);v(this,E,!0);v(this,T,()=>{var s=q;if(r(this,l).has(s)){var t=r(this,l).get(s),a=r(this,o).get(t);if(a)V(a),r(this,b).delete(t);else{var n=r(this,h).get(t);n&&(r(this,o).set(t,n.effect),r(this,h).delete(t),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),a=n.effect)}for(const[i,u]of r(this,l)){if(r(this,l).delete(i),i===s)break;const f=r(this,h).get(u);f&&(O(f.effect),r(this,h).delete(u))}for(const[i,u]of r(this,o)){if(i===t||r(this,b).has(i))continue;const f=()=>{if(Array.from(r(this,l).values()).includes(i)){var _=document.createDocumentFragment();se(u,_),_.append(x()),r(this,h).set(i,{effect:u,fragment:_})}else O(u);r(this,b).delete(i),r(this,o).delete(i)};r(this,E)||!a?(r(this,b).add(i),X(u,f,!1)):f()}}});v(this,R,s=>{r(this,l).delete(s);const t=Array.from(r(this,l).values());for(const[a,n]of r(this,h))t.includes(a)||(O(n.effect),r(this,h).delete(a))});this.anchor=s,Y(this,E,t)}ensure(s,t){var a=q,n=te();if(t&&!r(this,o).has(s)&&!r(this,h).has(s))if(n){var i=document.createDocumentFragment(),u=x();i.append(u),r(this,h).set(s,{effect:F(()=>t(u)),fragment:i})}else r(this,o).set(s,F(()=>t(this.anchor)));if(r(this,l).set(a,s),n){for(const[f,c]of r(this,o))f===s?a.skipped_effects.delete(c):a.skipped_effects.add(c);for(const[f,c]of r(this,h))f===s?a.skipped_effects.delete(c.effect):a.skipped_effects.add(c.effect);a.oncommit(r(this,T)),a.ondiscard(r(this,R))}else D&&(this.anchor=ee),r(this,T).call(this)}}l=new WeakMap,o=new WeakMap,h=new WeakMap,b=new WeakMap,E=new WeakMap,T=new WeakMap,R=new WeakMap;function qe(e,s,t=!1){D&&re();var a=new ke(e),n=t?ie:0;function i(u,f){if(D){const _=ne(e)===fe;if(u===_){var c=ue();ce(c),a.anchor=c,C(!1),a.ensure(u,f),C(!0);return}}a.ensure(u,f)}ae(()=>{var u=!1;s((f,c=!0)=>{u=!0,i(c,f)}),u||i(!1,null)},n)}function z(e,s){return e===s||(e==null?void 0:e[j])===s}function xe(e={},s,t,a){return de(()=>{var n,i;return he(()=>{n=i,i=(a==null?void 0:a())||[],G(()=>{e!==t(...i)&&(s(e,...i),n&&z(t(...n),e)&&s(null,...n))})}),()=>{le(()=>{i&&z(t(...i),e)&&s(null,...i)})}}),e}let y=!1,M=Symbol();function Fe(e,s,t){const a=t[s]??(t[s]={store:null,source:oe(void 0),unsubscribe:$});if(a.store!==e&&!(M in t))if(a.unsubscribe(),a.store=e??null,e==null)a.source.v=void 0,a.unsubscribe=$;else{var n=!0;a.unsubscribe=we(e,i=>{n?a.source.v=i:H(a.source,i)}),n=!1}return e&&M in t?Ne(e):I(a.source)}function Ce(){const e={};function s(){_e(()=>{for(var t in e)e[t].unsubscribe();ve(e,M,{enumerable:!1,value:!0})})}return[e,s]}function Le(e){var s=y;try{return y=!1,[e(),y]}finally{y=s}}function $e(e,s,t,a){var N;var n=!De||(t&Me)!==0,i=(t&Oe)!==0,u=(t&me)!==0,f=a,c=!0,_=()=>(c&&(c=!1,f=u?G(a):a),f),g;if(i){var J=j in e||pe in e;g=((N=be(e,s))==null?void 0:N.set)??(J&&s in e?d=>e[s]=d:void 0)}var P,w=!1;i?[P,w]=Le(()=>e[s]):P=e[s],P===void 0&&a!==void 0&&(P=_(),g&&(n&&Se(),g(P)));var S;if(n?S=()=>{var d=e[s];return d===void 0?_():(c=!0,d)}:S=()=>{var d=e[s];return d!==void 0&&(f=void 0),d===void 0?f:d},n&&(t&Ie)===0)return S;if(g){var K=e.$$legacy;return(function(d,p){return arguments.length>0?((!n||!p||K||w)&&g(p?S():d),d):S()})}var m=!1,A=((t&Re)!==0?Ee:ye)(()=>(m=!1,S()));i&&I(A);var W=Pe;return(function(d,p){if(arguments.length>0){const k=p?I(A):n&&i?ge(d):d;return H(A,k),m=!0,f!==void 0&&(f=k),d}return Te&&m||(W.f&Ae)!==0?A.v:I(A)})}export{ke as B,Ce as a,xe as b,qe as i,$e as p,Fe as s};
